<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸»å±å¹•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            width: 100vw;
            margin: 0;
            padding: 0;
            position: relative;
            overflow: hidden;
            touch-action: manipulation; /* ç¡®ä¿è§¦æ‘¸äº‹ä»¶æ­£å¸¸å·¥ä½œ */
        }
        
        /* ä¿®å¤ç§»åŠ¨ç«¯100vhé—®é¢˜ */
        @media screen and (max-width: 768px) {
            body {
                height: -webkit-fill-available;
                height: 100dvh;
            }
        }

        /* å£çº¸ */
        .wallpaper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://picsum.photos/seed/home/400/800') center/cover no-repeat;
            z-index: -1;
        }

        /* è§†é¢‘å£çº¸å®¹å™¨ */
        .video-wallpaper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            display: none;
        }

        .video-wallpaper video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* çŠ¶æ€æ  */
        .status-bar {
            height: 44px;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: transparent;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            width: 100%;
        }
        
        /* ä¿®å¤çŠ¶æ€æ åœ¨ç§»åŠ¨ç«¯çš„æ˜¾ç¤ºé—®é¢˜ */
        @media screen and (max-width: 768px) {
            .status-bar {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
            }
        }

        .status-bar .time {
            font-size: 14px;
            font-weight: 600;
            color: white;
        }

        .status-bar .icons {
            display: flex;
            gap: 6px;
            align-items: center;
        }

        .status-bar .icons svg {
            width: 16px;
            height: 16px;
            fill: white;
            stroke: white;
            stroke-width: 1.5;
        }

        /* ä¿¡å·å›¾æ ‡ */
        .signal-bars {
            display: flex;
            align-items: flex-end;
            height: 14px;
        }

        .signal-bar {
            width: 3px;
            background: white;
            margin-right: 1px;
        }

        .signal-bar-1 { height: 4px; }
        .signal-bar-2 { height: 8px; }
        .signal-bar-3 { height: 12px; }
        .signal-bar-4 { height: 14px; }

        /* ç”µæ± å›¾æ ‡ */
        .battery-icon {
            position: relative;
            width: 20px;
            height: 10px;
            border: 1px solid white;
            border-radius: 2px;
        }

        .battery-fill {
            position: absolute;
            top: 1px;
            left: 1px;
            height: 6px;
            width: 70%; /* 70% ç”µé‡ */
            background: white;
        }

        .battery-tip {
            position: absolute;
            top: 3px;
            right: -3px;
            width: 2px;
            height: 4px;
            background: white;
        }

        /* æ»‘åŠ¨é¡µé¢å®¹å™¨ */
        .pages-container {
            display: flex;
            width: 200%;
            height: 100%;
            transition: transform 0.3s ease;
            touch-action: pan-x; /* å…è®¸æ°´å¹³æ»‘åŠ¨ */
            flex-shrink: 0;
            position: relative;
        }
        
        /* ä¿®å¤æ»‘åŠ¨é¡µé¢å®¹å™¨åœ¨ç§»åŠ¨ç«¯çš„æ˜¾ç¤ºé—®é¢˜ */
        @media screen and (max-width: 768px) {
            .pages-container {
                height: 100%;
            }
        }
        
        /* é¡µé¢å®¹å™¨ */
        .page-container {
            width: 100%;
            height: calc(100vh - 44px - 120px);
            overflow: hidden;
            position: relative;
            box-sizing: border-box;
            margin-top: 44px;
            margin-bottom: 120px;
        }
        
        /* ä¿®å¤é¡µé¢å®¹å™¨åœ¨ç§»åŠ¨ç«¯çš„æ˜¾ç¤ºé—®é¢˜ */
        @media screen and (max-width: 768px) {
            .page-container {
                height: calc(100dvh - 44px - 120px);
                margin-top: 44px;
                margin-bottom: 120px;
            }
        }

        .page {
            width: 50%;
            height: 100%;
            position: relative;
            padding: 0 25px; /* ä¿æŒä¸åº”ç”¨ç½‘æ ¼ä¸€è‡´çš„å·¦å³è¾¹è· */
            flex-shrink: 0;
        }
        
        /* ä¿®å¤é¡µé¢åœ¨ç§»åŠ¨ç«¯çš„æ˜¾ç¤ºé—®é¢˜ */
        @media screen and (max-width: 768px) {
            .page {
                width: 50%;
                height: 100%;
            }
        }

        /* ä¸»å±å¹•åº”ç”¨ç½‘æ ¼ */
        .app-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(5, 1fr);
            gap: 25px;
            padding: 0;
            align-content: start;
            height: 100%;
            width: 100%;
            margin: 0 auto;
            max-width: 500px;
        }
        
        /* ä¿®å¤åº”ç”¨ç½‘æ ¼åœ¨ç§»åŠ¨ç«¯çš„æ˜¾ç¤ºé—®é¢˜ */
        @media screen and (max-width: 768px) {
            .app-grid {
                height: 100%;
                width: 100%;
            }
        }

        .app-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.2s;
            position: relative;
        }

        .app-icon .icon-bg {
            width: 65px;
            height: 65px;
            border-radius: 18px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .app-icon .icon-bg svg {
            width: 35px;
            height: 35px;
        }

        .app-icon span {
            font-size: 13px;
            text-align: center;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }

        .app-icon:hover {
            transform: scale(1.1);
        }

        /* Dockæ æ ·å¼ */
        .dock {
            height: 100px;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 15px;
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 30px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.15);
            z-index: 999;
            pointer-events: auto; /* ç¡®ä¿å¯ä»¥æ¥æ”¶ç‚¹å‡»äº‹ä»¶ */
            width: 90%;
            max-width: 500px;
        }
        
        /* ä¿®å¤Dockæ åœ¨ç§»åŠ¨ç«¯çš„æ˜¾ç¤ºé—®é¢˜ */
        @media screen and (max-width: 768px) {
            .dock {
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
            }
        }

        .dock .app-icon {
            margin: 0 10px;
        }

        .dock .app-icon .icon-bg {
            width: 70px;
            height: 70px;
            border-radius: 20px;
        }

        .dock .app-icon .icon-bg svg {
            width: 40px;
            height: 40px;
        }

        /* è‡ªå®šä¹‰å¼¹çª— */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .modal.active {
            opacity: 1;
            pointer-events: all;
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 16px;
            padding: 20px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
            width: 300px;
            max-width: 90%;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 600;
            color: white;
        }

        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.2s ease;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .modal-body {
            color: white;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        .modal-btn {
            padding: 8px 16px;
            border-radius: 8px;
            border: none;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .modal-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .modal-btn.primary {
            background: rgba(0, 122, 255, 0.8);
        }

        .modal-btn.primary:hover {
            background: rgba(0, 122, 255, 1);
        }

        /* åç‰‡ç»„ä»¶æ ·å¼ */
        .profile-card {
            grid-row: 4 / 6; /* å æ®ç¬¬å››å’Œç¬¬äº”è¡Œ */
            grid-column: 1 / 3; /* å æ®ç¬¬ä¸€å’Œç¬¬äºŒåˆ— */
            background: transparent; /* å®Œå…¨é€æ˜èƒŒæ™¯ */
            border-radius: 16px;
            padding: 15px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.2s;
        }

        /* éŸ³ä¹æ’­æ”¾å™¨å°ç»„ä»¶ */
        .music-player {
            position: fixed;
            top: 320px;  /* è¿˜åŸåŸæ¥çš„ä½ç½® */
            left: 25px;
            width: calc(100% - 50px);
            background: rgba(255, 255, 255, 0.01);
            border-radius: 20px;
            padding: 10px;
            z-index: 997;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
        }

        /* ä¸“è¾‘å°é¢ */
        .album-cover {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            overflow: hidden;
            margin-right: 15px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            cursor: pointer;
        }

        .album-cover .placeholder {
            font-size: 30px;
            color: rgba(255, 255, 255, 0.5);
        }

        .album-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }

        /* æ—‹è½¬åŠ¨ç”»ç±» */
        .rotating {
            animation: rotate 20s linear infinite;
            animation-play-state: paused;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .rotating.playing {
            animation-play-state: running;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* éŸ³ä¹ä¿¡æ¯ */
        .music-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-width: 0;
            position: relative;
        }

        .song-info {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
            width: 100%;
        }

        .song-name {
            font-size: 14px;
            font-weight: bold;
            margin-right: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            flex: 1;
            min-width: 0;
            cursor: pointer;
        }

        .favorite-btn {
            width: 24px;
            height: 24px;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            flex-shrink: 0;
            position: absolute;
            top: 0;
            right: 0;
            filter: drop-shadow(0 0 4px rgba(255, 59, 48, 0.3));
        }

        .favorite-btn.active {
            filter: drop-shadow(0 0 8px rgba(255, 59, 48, 0.8));
        }

        .favorite-btn svg {
            width: 100%;
            height: 100%;
            fill: #fff;
        }

        .favorite-btn.active svg {
            fill: #ff3b30;
        }

        .artist-name {
            font-size: 12px;
            color: #aaa;
            margin-bottom: 10px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* æ§åˆ¶æŒ‰é’® */
        .control-buttons {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
        }

        .control-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            flex-shrink: 0;
        }

        .control-btn svg {
            width: 16px;
            height: 16px;
            fill: white;
        }

        .play-btn {
            width: 40px;
            height: 40px;
        }

        .play-btn svg {
            width: 20px;
            height: 20px;
        }

        .profile-card:hover {
            transform: scale(1.05);
        }

        .profile-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: url('https://picsum.photos/seed/profile/100/100') center/cover;
            border: 2px solid rgba(255, 255, 255, 0.3);
            margin-bottom: 10px;
            object-fit: cover;
            object-position: center;
        }

        .profile-nickname {
            font-size: 16px;
            font-weight: 600;
            color: white;
            margin-bottom: 5px;
            text-align: center;
        }

        .profile-signature {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
            max-width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        /* è¡¨å•æ ·å¼ */
        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .url-input {
            width: 100%;
            padding: 12px 15px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 14px;
        }

        .url-input:focus {
            outline: none;
            border-color: #007AFF;
            background: rgba(255, 255, 255, 0.25);
        }

        .url-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        /* éšè—æ–‡ä»¶è¾“å…¥æ¡† */
        .hidden-file-input {
            display: none;
        }

        /* è¡¨å•æ ‡ç­¾æ ·å¼ */
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.9);
        }

        /* è¡¨å•è¾“å…¥æ¡†æ ·å¼ */
        .form-input {
            width: 100%;
            padding: 12px 15px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 14px;
            box-sizing: border-box;
        }

        .form-input:focus {
            outline: none;
            border-color: rgba(0, 122, 255, 0.5);
            background: rgba(255, 255, 255, 0.15);
        }

        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        /* ä¸Šä¼ åŒºåŸŸæ ·å¼ */
        .upload-area {
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .upload-area:hover {
            border-color: rgba(0, 122, 255, 0.5);
            background: rgba(0, 122, 255, 0.05);
        }

        .upload-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }

        .upload-text {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
        }

        /* æäº¤æŒ‰é’®æ ·å¼ */
        .submit-btn {
            width: 100%;
            padding: 12px;
            border-radius: 12px;
            background: linear-gradient(45deg, #007AFF, #0A84FF);
            border: none;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(10, 132, 255, 0.4);
        }

        .submit-btn:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* æ»šåŠ¨æ¡æ ·å¼ */
        .app-grid::-webkit-scrollbar {
            width: 4px;
        }

        .app-grid::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
        }

        .app-grid::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
        }
    </style>
</head>
<body>
    <div class="wallpaper"></div>
    <div class="video-wallpaper">
        <video autoplay muted loop></video>
    </div>
    
    <!-- çŠ¶æ€æ  -->
    <div class="status-bar">
        <div class="time" id="current-time">9:41</div>
        <div class="icons">
            <!-- ä¿¡å·å›¾æ ‡ -->
            <div class="signal-bars">
                <div class="signal-bar signal-bar-1"></div>
                <div class="signal-bar signal-bar-2"></div>
                <div class="signal-bar signal-bar-3"></div>
                <div class="signal-bar signal-bar-4"></div>
            </div>
            <!-- ç”µæ± å›¾æ ‡ -->
            <div class="battery-icon">
                <div class="battery-fill"></div>
                <div class="battery-tip"></div>
            </div>
        </div>
    </div>
    
    <!-- é¡µé¢å®¹å™¨ -->
    <div class="page-container">
        <!-- æ»‘åŠ¨é¡µé¢å®¹å™¨ -->
        <div class="pages-container" id="pages-container">
            <!-- ç¬¬ä¸€é¡µ -->
            <div class="page" id="page-1">
                <div class="app-grid" id="app-grid-1">
                    <!-- åº”ç”¨å›¾æ ‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
            
            <!-- ç¬¬äºŒé¡µ -->
            <div class="page" id="page-2">
                <div class="app-grid" id="app-grid-2">
                    <!-- åº”ç”¨å›¾æ ‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Dockæ  -->
    <div class="dock">
        <!-- Dockå›¾æ ‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
    </div>
    
    <!-- è‡ªå®šä¹‰å¼¹çª— -->
    <div class="modal" id="custom-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="modal-title">æç¤º</div>
                <button class="close-btn" id="close-modal">Ã—</button>
            </div>
            <div class="modal-body" id="modal-body">
                è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰å¼¹çª—
            </div>
            <div class="modal-footer">
                <button class="modal-btn" id="cancel-btn">å–æ¶ˆ</button>
                <button class="modal-btn primary" id="confirm-btn">ç¡®å®š</button>
            </div>
        </div>
    </div>
    
    <!-- åç‰‡ç»„ä»¶å¼¹çª— -->
    <div class="modal" id="profile-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">ç¼–è¾‘åç‰‡</div>
                <button class="close-btn" id="close-profile-modal">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="profile-nickname">æ˜µç§°</label>
                    <input type="text" id="profile-nickname" class="url-input" placeholder="è¯·è¾“å…¥æ˜µç§°">
                </div>
                <div class="form-group">
                    <label for="profile-signature">ä¸ªæ€§ç­¾å</label>
                    <textarea id="profile-signature" class="url-input" placeholder="è¯·è¾“å…¥ä¸ªæ€§ç­¾å" rows="3"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn" id="cancel-profile-btn">å–æ¶ˆ</button>
                <button class="modal-btn primary" id="save-profile-btn">ä¿å­˜</button>
            </div>
        </div>
    </div>
    
    <!-- éšè—çš„æ–‡ä»¶ä¸Šä¼ è¾“å…¥æ¡† -->
    <input type="file" id="upload-input" accept="image/*" style="display: none;">
    
    <!-- éšè—çš„éŸ³é¢‘æ’­æ”¾å™¨ -->
    <audio id="audioPlayer" style="display: none;"></audio>
    
    <!-- æ­Œæ›²ä¿¡æ¯å¼¹çª— -->
    <div class="modal" id="songModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">è®¾ç½®æ­Œæ›²ä¿¡æ¯</div>
                <button class="close-btn" onclick="closeSongModal()">&times;</button>
            </div>
            <div class="form-group">
                <label class="form-label">ä¸Šä¼ MP3æ–‡ä»¶</label>
                <div class="upload-area" onclick="document.getElementById('mp3Upload').click()">
                    <div class="upload-icon">ğŸµ</div>
                    <div class="upload-text">ç‚¹å‡»é€‰æ‹©MP3æ–‡ä»¶</div>
                </div>
                <input type="file" id="mp3Upload" class="hidden-file-input" accept="audio/mpeg" onchange="handleMp3Upload(event)">
            </div>
            <div class="form-group">
                <label class="form-label">æ­Œæ›²åç§°</label>
                <input type="text" class="form-input" id="songNameInput" placeholder="è¯·è¾“å…¥æ­Œæ›²åç§°">
            </div>
            <div class="form-group">
                <label class="form-label">æ­Œæ‰‹</label>
                <input type="text" class="form-input" id="artistNameInput" placeholder="è¯·è¾“å…¥æ­Œæ‰‹åç§°">
            </div>
            <button class="submit-btn" id="saveSongBtn" onclick="saveSongInfo()" disabled>ä¿å­˜</button>
        </div>
    </div>

    <script>
        // æ›´æ–°æ—¶é—´
        function updateTime() {
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            document.getElementById('current-time').textContent = `${hours}:${minutes}`;
        }
        
        // åˆå§‹æ›´æ–°æ—¶é—´
        updateTime();
        
        // æ¯åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡æ—¶é—´
        setInterval(updateTime, 60000);
        
        // åº”ç”¨æ•°æ® - ç¬¬ä¸€é¡µ
        const appsPage1 = [
            // åç‰‡ç»„ä»¶åœ¨ç¬¬å››äº”è¡Œçš„ä¸€äºŒä¸¤åˆ—
            // å£çº¸appåœ¨ç¬¬å››è¡Œç¬¬ä¸‰åˆ—
            { name: "å£çº¸", icon: "wallpaper", row: 4, col: 3 },
            // è®¾ç½®appåœ¨ç¬¬å››è¡Œç¬¬å››åˆ—
            { name: "è®¾ç½®", icon: "settings", row: 4, col: 4 },
            // èŠå¤©appåœ¨ç¬¬äº”è¡Œç¬¬ä¸‰åˆ—
            { name: "èŠå¤©", icon: "chat", row: 5, col: 3 }
        ];
        
        // åº”ç”¨æ•°æ® - ç¬¬äºŒé¡µ
        const appsPage2 = [
            // æ—¥è®°appåœ¨ç¬¬ä¸‰è¡Œç¬¬ä¸€åˆ—
            { name: "æ—¥è®°", icon: "calendar", row: 3, col: 1 }
        ];
        
        // Dockå›¾æ ‡æ•°æ®
        const dockApps = [
            { name: "ç”µè¯", icon: "phone" },
            { name: "çŸ­ä¿¡", icon: "message" },
            { name: "æµè§ˆå™¨", icon: "browser" },
            { name: "éŸ³ä¹", icon: "music" }
        ];
        
        // å›¾æ ‡SVGæ•°æ®
        const iconSVGs = {
            phone: `<path d="M22 16.92l-1.41-1.41c-.85-.85-2.19-.9-3.07-.17l-2.12 1.73c-.86.71-2.11.65-2.9-.15l-2.9-2.9c-.8-.8-.86-2.05-.15-2.9l1.73-2.12c.73-.88.68-2.22-.17-3.07L9.08 6c-.98-.98-2.66-.98-3.64 0L3 8.5 2.5 11c-.13.64.11 1.29.63 1.73l2.17 1.87c.79.68 1.88 1.05 2.93 1.05 1.24 0 2.42-.52 3.28-1.43l1.31-1.31c.28-.28.71-.28.99 0l2.9 2.9c.28.28.28.71 0 .99l-1.31 1.31c-.91.86-1.43 2.04-1.43 3.28 0 1.05.37 2.14 1.05 2.93l1.87 2.17c.44.52 1.09.76 1.73.63L21 21l2.5-2.5c.98-.98.98-2.66 0-3.64z" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>`,
            message: `<path d="M21 15.5a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10.5z" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><polyline points="3,15 12,13 21,15" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>`,
            mail: `<path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><polyline points="22,6 12,13 2,6" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>`,
            browser: `<circle cx="12" cy="12" r="10" stroke="white" stroke-width="1.5" fill="none"/><circle cx="12" cy="12" r="4" stroke="white" stroke-width="1.5" fill="none"/><line x1="21.17" y1="8" x2="12" y2="8" stroke="white" stroke-width="1.5" stroke-linecap="round"/><line x1="3.95" y1="6.06" x2="8.54" y2="14" stroke="white" stroke-width="1.5" stroke-linecap="round"/><line x1="10.88" y1="21.94" x2="15.46" y2="14" stroke="white" stroke-width="1.5" stroke-linecap="round"/>`,
            camera: `<path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2v10.5z" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><circle cx="12" cy="13" r="4" stroke="white" stroke-width="1.5" fill="none"/>`,
            photos: `<rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke="white" stroke-width="1.5" fill="none"/><circle cx="8.5" cy="8.5" r="1.5" stroke="white" stroke-width="1.5" fill="none"/><polyline points="21,15 16,10 5,21" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>`,
            music: `<path d="M9 18V5l12-2v13" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><circle cx="6" cy="18" r="3" stroke="white" stroke-width="1.5" fill="none"/><circle cx="18" cy="16" r="3" stroke="white" stroke-width="1.5" fill="none"/>`,
            video: `<polygon points="23 7 16 12 23 17 23 7" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><rect x="1" y="5" width="15" height="14" rx="2" ry="2" stroke="white" stroke-width="1.5" fill="none"/>`,
            map: `<polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="8" y1="2" x2="8" y2="18" stroke="white" stroke-width="1.5" stroke-linecap="round"/><line x1="16" y1="6" x2="16" y2="22" stroke="white" stroke-width="1.5" stroke-linecap="round"/>`,
            weather: `<path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>`,
            clock: `<circle cx="12" cy="12" r="10" stroke="white" stroke-width="1.5" fill="none"/><polyline points="12,6 12,12 16,14" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>`,
            calculator: `<rect x="4" y="2" width="16" height="20" rx="2" ry="2" stroke="white" stroke-width="1.5" fill="none"/><line x1="8" y1="6" x2="16" y2="6" stroke="white" stroke-width="1.5" stroke-linecap="round"/><line x1="16" y1="10" x2="16" y2="10" stroke="white" stroke-width="1.5" stroke-linecap="round"/><line x1="16" y1="14" x2="16" y2="14" stroke="white" stroke-width="1.5" stroke-linecap="round"/><line x1="8" y1="10" x2="12" y2="10" stroke="white" stroke-width="1.5" stroke-linecap="round"/><line x1="8" y1="14" x2="12" y2="14" stroke="white" stroke-width="1.5" stroke-linecap="round"/><line x1="8" y1="18" x2="16" y2="18" stroke="white" stroke-width="1.5" stroke-linecap="round"/>`,
            health: `<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>`,
            wallet: `<path d="M20 6h-4c0-2.21-1.79-4-4-4S8 3.79 8 6H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2z" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><rect x="8" y="4" width="8" height="2" stroke="white" stroke-width="1.5" fill="none"/><line x1="8" y1="14" x2="16" y2="14" stroke="white" stroke-width="1.5" stroke-linecap="round"/><line x1="8" y1="18" x2="12" y2="18" stroke="white" stroke-width="1.5" stroke-linecap="round"/>`,
            files: `<path d="M13 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V9l-7-7-8 3v7c0 6 8 10 8 10z" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>`,
            wallpaper: `<path d="M4 16l4-4 4 4 4-4 4 4" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><path d="M4 10l4-4 4 4 4-4 4 4" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><path d="M2 2h20v20H2z" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>`,
            settings: `<circle cx="12" cy="12" r="3" stroke="white" stroke-width="1.5" fill="none"/><path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round"/><path d="M12 2v2" stroke="white" stroke-width="1.5" stroke-linecap="round"/><path d="M12 20v2" stroke="white" stroke-width="1.5" stroke-linecap="round"/><path d="M20 12h2" stroke="white" stroke-width="1.5" stroke-linecap="round"/><path d="M2 12h2" stroke="white" stroke-width="1.5" stroke-linecap="round"/><path d="M16.24 7.76l1.41-1.41" stroke="white" stroke-width="1.5" stroke-linecap="round"/><path d="M6.34 17.66l1.41-1.41" stroke="white" stroke-width="1.5" stroke-linecap="round"/><path d="M16.24 16.24l1.41 1.41" stroke="white" stroke-width="1.5" stroke-linecap="round"/><path d="M6.34 6.34l1.41 1.41" stroke="white" stroke-width="1.5" stroke-linecap="round"/>`,
            store: `<circle cx="9" cy="21" r="1" stroke="white" stroke-width="1.5" fill="none"/><circle cx="20" cy="21" r="1" stroke="white" stroke-width="1.5" fill="none"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>`,
            news: `<path d="M12 20h9" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>`,
            chat: `<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>`,
            calendar: `<rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="white" stroke-width="1.5" fill="none"/><line x1="16" y1="2" x2="16" y2="6" stroke="white" stroke-width="1.5" stroke-linecap="round"/><line x1="8" y1="2" x2="8" y2="6" stroke="white" stroke-width="1.5" stroke-linecap="round"/><line x1="3" y1="10" x2="21" y2="10" stroke="white" stroke-width="1.5" stroke-linecap="round"/>`
        };
        
        // å½“å‰é¡µé¢ç´¢å¼•
        let currentPage = 0;
        
        // åˆ›å»ºç¬¬ä¸€é¡µåº”ç”¨å›¾æ ‡
        function createAppIconsPage1() {
            const appGrid = document.getElementById('app-grid-1');
            appGrid.innerHTML = '';
            
            // åˆ›å»ºåç‰‡ç»„ä»¶
            createProfileCard();
            
            // åˆ›å»ºéŸ³ä¹æ’­æ”¾å™¨å°ç»„ä»¶
            createMusicPlayer();
            
            appsPage1.forEach(app => {
                const appElement = document.createElement('div');
                appElement.className = 'app-icon';
                appElement.innerHTML = `
                    <div class="icon-bg">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            ${iconSVGs[app.icon]}
                        </svg>
                    </div>
                    <span>${app.name}</span>
                `;
                
                // è®¾ç½®ç½‘æ ¼ä½ç½®
                appElement.style.gridRow = app.row;
                appElement.style.gridColumn = app.col;
                
                // ä¸ºèŠå¤©åº”ç”¨æ·»åŠ ç‰¹æ®Šå¤„ç†
                if (app.name === "èŠå¤©") {
                    appElement.addEventListener('click', function() {
                        window.location.href = 'xiaoxiliebiao.html';
                    });
                } else if (app.name === "è®¾ç½®") {
                    appElement.addEventListener('click', function() {
                        window.location.href = 'shezhi.html';
                    });
                } else if (app.name === "å£çº¸") {
                    appElement.addEventListener('click', function() {
                        // è·³è½¬åˆ°å£çº¸åº”ç”¨é¡µé¢
                        window.location.href = 'bizhi.html';
                    });
                } else {
                    appElement.addEventListener('click', function() {
                        showModal('åº”ç”¨æç¤º', `æ‚¨ç‚¹å‡»äº†${app.name}åº”ç”¨ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºåº”ç”¨ã€‚`);
                    });
                }
                
                appGrid.appendChild(appElement);
            });
            
            // ç»‘å®šåç‰‡ç»„ä»¶äº‹ä»¶
            bindProfileCardEvents();
            
            // ç»‘å®šéŸ³ä¹æ’­æ”¾å™¨äº‹ä»¶
            bindMusicPlayerEvents();
        }
        
        // åˆ›å»ºç¬¬äºŒé¡µåº”ç”¨å›¾æ ‡
        function createAppIconsPage2() {
            const appGrid = document.getElementById('app-grid-2');
            appGrid.innerHTML = '';
            
            appsPage2.forEach(app => {
                const appElement = document.createElement('div');
                appElement.className = 'app-icon';
                appElement.innerHTML = `
                    <div class="icon-bg">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            ${iconSVGs[app.icon]}
                        </svg>
                    </div>
                    <span>${app.name}</span>
                `;
                
                // è®¾ç½®ç½‘æ ¼ä½ç½®
                appElement.style.gridRow = app.row;
                appElement.style.gridColumn = app.col;
                
                // ä¸ºæ—¥è®°åº”ç”¨æ·»åŠ ç‰¹æ®Šå¤„ç†
                if (app.name === "æ—¥è®°") {
                    appElement.addEventListener('click', function() {
                        showModal('åº”ç”¨æç¤º', 'æ—¥è®°åº”ç”¨åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­...');
                    });
                } else {
                    appElement.addEventListener('click', function() {
                        showModal('åº”ç”¨æç¤º', `æ‚¨ç‚¹å‡»äº†${app.name}åº”ç”¨ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºåº”ç”¨ã€‚`);
                    });
                }
                
                appGrid.appendChild(appElement);
            });
        }
        
        // åˆ›å»ºåç‰‡ç»„ä»¶
        function createProfileCard() {
            const appGrid = document.getElementById('app-grid-1');
            
            // ä»æœ¬åœ°å­˜å‚¨è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨é»˜è®¤å€¼
            const profileData = JSON.parse(localStorage.getItem('userProfile') || JSON.stringify({
                nickname: 'ç”¨æˆ·æ˜µç§°',
                signature: 'ä¸ªæ€§ç­¾å',
                avatar: 'https://picsum.photos/seed/profile/100/100'
            }));
            
            const profileCard = document.createElement('div');
            profileCard.className = 'profile-card';
            profileCard.innerHTML = `
                <div class="profile-avatar" style="background-image: url('${profileData.avatar}')"></div>
                <div class="profile-nickname">${profileData.nickname}</div>
                <div class="profile-signature">${profileData.signature}</div>
            `;
            
            appGrid.appendChild(profileCard);
        }

        // åˆ›å»ºéŸ³ä¹æ’­æ”¾å™¨å°ç»„ä»¶
        function createMusicPlayer() {
            const appGrid = document.getElementById('app-grid-1');
            
            // ä»æœ¬åœ°å­˜å‚¨è·å–éŸ³ä¹ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨é»˜è®¤å€¼
            const musicData = JSON.parse(localStorage.getItem('currentSong') || JSON.stringify({
                name: 'æœªçŸ¥æ­Œæ›²',
                artist: 'æœªçŸ¥è‰ºæœ¯å®¶'
            }));
            
            const musicPlayer = document.createElement('div');
            musicPlayer.className = 'music-player';
            musicPlayer.innerHTML = `
                <div class="album-cover rotating" id="albumCover">
                    <div class="placeholder">â™ª</div>
                </div>
                <div class="music-info">
                    <div class="song-info">
                        <div class="song-name" id="songName">${musicData.name}</div>
                    </div>
                    <div class="artist-name" id="artistName">${musicData.artist}</div>
                    <div class="control-buttons">
                        <button class="control-btn" onclick="previousSong()">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6 6H8V18H6V6ZM9.5 12L18 6V18L9.5 12Z"/>
                            </svg>
                        </button>
                        <button class="control-btn play-btn" onclick="togglePlay()" id="playBtn">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="playIcon">
                                <path d="M8 5V19L19 12L8 5Z" id="playPath"/>
                            </svg>
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="pauseIcon" style="display: none;">
                                <path d="M14 19V5H18V19H14ZM6 19V5H10V19H6Z"/>
                            </svg>
                        </button>
                        <button class="control-btn" onclick="nextSong()">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6 18L14.5 12L6 6V18ZM16 6V18H18V6H16Z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            `;
            
            appGrid.appendChild(musicPlayer);
            
            // åˆå§‹åŒ–éŸ³ä¹æ’­æ”¾å™¨
            initMusicPlayer();
        }
        
        // æ˜¾ç¤ºåç‰‡ç¼–è¾‘å¼¹çª—
        function showProfileModal() {
            // ä»æœ¬åœ°å­˜å‚¨è·å–ç”¨æˆ·ä¿¡æ¯
            const profileData = JSON.parse(localStorage.getItem('userProfile') || JSON.stringify({
                nickname: 'ç”¨æˆ·æ˜µç§°',
                signature: 'ä¸ªæ€§ç­¾å',
                avatar: 'https://picsum.photos/seed/profile/100/100'
            }));
            
            // å¡«å……è¡¨å•æ•°æ®
            document.getElementById('profile-nickname').value = profileData.nickname;
            document.getElementById('profile-signature').value = profileData.signature;
            
            // æ˜¾ç¤ºå¼¹çª—
            document.getElementById('profile-modal').classList.add('active');
        }
        
        // ä¿å­˜åç‰‡ä¿¡æ¯
        function saveProfile() {
            const nickname = document.getElementById('profile-nickname').value.trim();
            const signature = document.getElementById('profile-signature').value.trim();
            
            if (!nickname) {
                alert('è¯·è¾“å…¥æ˜µç§°');
                return;
            }
            
            // è·å–å½“å‰å¤´åƒURL
            const profileCard = document.querySelector('.profile-card');
            const avatarElement = profileCard.querySelector('.profile-avatar');
            const currentAvatar = avatarElement.style.backgroundImage.replace(/url\(["']?(.*?)["']?\)/, '$1');
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            const profileData = {
                nickname: nickname,
                signature: signature,
                avatar: currentAvatar
            };
            
            localStorage.setItem('userProfile', JSON.stringify(profileData));
            
            // æ›´æ–°é¡µé¢æ˜¾ç¤º
            document.querySelector('.profile-nickname').textContent = nickname;
            document.querySelector('.profile-signature').textContent = signature;
            
            // éšè—å¼¹çª—
            document.getElementById('profile-modal').classList.remove('active');
        }
        
        // åˆ›å»ºDockå›¾æ ‡
        function createDockIcons() {
            const dock = document.querySelector('.dock');
            dock.innerHTML = '';
            
            dockApps.forEach((dockApp, index) => {
                const dockElement = document.createElement('div');
                dockElement.className = 'app-icon';
                dockElement.style.pointerEvents = 'auto'; // ç¡®ä¿å¯ä»¥æ¥æ”¶äº‹ä»¶
                dockElement.innerHTML = `
                    <div class="icon-bg">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            ${iconSVGs[dockApp.icon]}
                        </svg>
                    </div>
                `;
                
                // ä¸ºæ¯ä¸ªDockå›¾æ ‡æ·»åŠ ç‚¹å‡»äº‹ä»¶
                dockElement.addEventListener('click', function(e) {
                    e.stopPropagation();
                    e.preventDefault();
                    
                    // æ ¹æ®ä¸åŒçš„åº”ç”¨è¿›è¡Œè·³è½¬
                    switch(dockApp.name) {
                        case 'ç”µè¯':
                            showModal('ç”µè¯åº”ç”¨', 'ç”µè¯åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­...');
                            break;
                        case 'çŸ­ä¿¡':
                            window.location.href = 'xiaoxiliebiao.html';
                            break;
                        case 'æµè§ˆå™¨':
                            window.location.href = 'https://www.baidu.com';
                            break;
                        case 'éŸ³ä¹':
                            showModal('éŸ³ä¹åº”ç”¨', 'éŸ³ä¹æ’­æ”¾å™¨åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­...');
                            break;
                        default:
                            showModal('åº”ç”¨æç¤º', `æ‚¨ç‚¹å‡»äº†${dockApp.name}åº”ç”¨ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºåº”ç”¨ã€‚`);
                    }
                });
                
                dock.appendChild(dockElement);
            });
            
            // ç¡®ä¿Dockå®¹å™¨ä¹Ÿå¯ä»¥æ¥æ”¶äº‹ä»¶
            dock.style.pointerEvents = 'auto';
        }
        
        // æ˜¾ç¤ºè‡ªå®šä¹‰å¼¹çª—
        function showModal(title, message) {
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-body').textContent = message;
            document.getElementById('custom-modal').classList.add('active');
        }
        
        // éšè—è‡ªå®šä¹‰å¼¹çª—
        function hideModal() {
            document.getElementById('custom-modal').classList.remove('active');
        }
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded'); // è°ƒè¯•ä¿¡æ¯
            
            // ç¡®ä¿æ‰€æœ‰å…ƒç´ éƒ½å·²åŠ è½½
            setTimeout(() => {
                try {
                    createAppIconsPage1();
                    createAppIconsPage2();
                    createDockIcons();
                    
                    // ç»‘å®šå¼¹çª—å…³é—­äº‹ä»¶
                    const closeModalBtn = document.getElementById('close-modal');
                    if (closeModalBtn) {
                        closeModalBtn.addEventListener('click', hideModal);
                    }
                    
                    const cancelBtn = document.getElementById('cancel-btn');
                    if (cancelBtn) {
                        cancelBtn.addEventListener('click', hideModal);
                    }
                    
                    const confirmBtn = document.getElementById('confirm-btn');
                    if (confirmBtn) {
                        confirmBtn.addEventListener('click', hideModal);
                    }
                    
                    // ç»‘å®šåç‰‡å¼¹çª—äº‹ä»¶
                    const closeProfileModalBtn = document.getElementById('close-profile-modal');
                    if (closeProfileModalBtn) {
                        closeProfileModalBtn.addEventListener('click', function() {
                            document.getElementById('profile-modal').classList.remove('active');
                        });
                    }
                    
                    const cancelProfileBtn = document.getElementById('cancel-profile-btn');
                    if (cancelProfileBtn) {
                        cancelProfileBtn.addEventListener('click', function() {
                            document.getElementById('profile-modal').classList.remove('active');
                        });
                    }
                    
                    const saveProfileBtn = document.getElementById('save-profile-btn');
                    if (saveProfileBtn) {
                        saveProfileBtn.addEventListener('click', saveProfile);
                    }
                    
                    // ç‚¹å‡»å¼¹çª—èƒŒæ™¯å…³é—­å¼¹çª—
                    const customModal = document.getElementById('custom-modal');
                    if (customModal) {
                        customModal.addEventListener('click', function(e) {
                            if (e.target === this) {
                                hideModal();
                            }
                        });
                    }
                    
                    const profileModal = document.getElementById('profile-modal');
                    if (profileModal) {
                        profileModal.addEventListener('click', function(e) {
                            if (e.target === this) {
                                this.classList.remove('active');
                            }
                        });
                    }
                    
                    // å¤„ç†å¤´åƒä¸Šä¼ 
                    const uploadInput = document.getElementById('upload-input');
                    if (uploadInput) {
                        uploadInput.addEventListener('change', function(e) {
                            const file = e.target.files[0];
                            if (file) {
                                const reader = new FileReader();
                                reader.onload = function(event) {
                                    // æ›´æ–°å¤´åƒæ˜¾ç¤º
                                    const profileCard = document.querySelector('.profile-card');
                                    if (profileCard) {
                                        const avatarElement = profileCard.querySelector('.profile-avatar');
                                        if (avatarElement) {
                                            avatarElement.style.backgroundImage = `url('${event.target.result}')`;
                                            
                                            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
                                            const profileData = JSON.parse(localStorage.getItem('userProfile') || JSON.stringify({
                                                nickname: 'ç”¨æˆ·æ˜µç§°',
                                                signature: 'ä¸ªæ€§ç­¾å',
                                                avatar: 'https://picsum.photos/seed/profile/100/100'
                                            }));
                                            
                                            profileData.avatar = event.target.result;
                                            localStorage.setItem('userProfile', JSON.stringify(profileData));
                                        }
                                    }
                                };
                                reader.readAsDataURL(file);
                            }
                        });
                    }
                    
                    // æ·»åŠ è§¦æ‘¸æ»‘åŠ¨äº‹ä»¶
                    addSwipeEvents();
                    
                    // åŠ è½½ä¿å­˜çš„å£çº¸
                    loadSavedWallpaper();
                    
                    // åˆå§‹åŒ–éŸ³ä¹æ’­æ”¾å™¨
                    initMusicPlayer();
                    
                    console.log('Initialization completed');
                } catch (error) {
                    console.error('Initialization error:', error);
                }
            }, 100); // å»¶è¿Ÿæ‰§è¡Œä»¥ç¡®ä¿å…ƒç´ å®Œå…¨åŠ è½½
        });
        
        // æ·»åŠ è§¦æ‘¸æ»‘åŠ¨äº‹ä»¶
        function addSwipeEvents() {
            const pagesContainer = document.getElementById('pages-container');
            let startX = 0;
            let startY = 0;
            let distX = 0;
            let distY = 0;
            let threshold = 50; // æ»‘åŠ¨é˜ˆå€¼
            let restraint = 100; // å‚ç›´æ–¹å‘é™åˆ¶
            let allowedTime = 500; // æ—¶é—´é™åˆ¶
            let startTime = 0;
            
            // ç¡®ä¿å®¹å™¨å¯ä»¥æ¥æ”¶è§¦æ‘¸äº‹ä»¶
            pagesContainer.style.touchAction = 'pan-x';
            
            pagesContainer.addEventListener('touchstart', function(e) {
                const touchObj = e.changedTouches[0];
                startX = touchObj.pageX;
                startY = touchObj.pageY;
                startTime = new Date().getTime();
                console.log('Touch start:', startX, startY);
            }, { passive: true });
            
            pagesContainer.addEventListener('touchmove', function(e) {
                // åªé˜»æ­¢å‚ç›´æ–¹å‘çš„é»˜è®¤æ»šåŠ¨
                const touchObj = e.changedTouches[0];
                const moveX = touchObj.pageX - startX;
                const moveY = touchObj.pageY - startY;
                
                // å¦‚æœä¸»è¦æ˜¯æ°´å¹³æ»‘åŠ¨ï¼Œé˜»æ­¢é»˜è®¤è¡Œä¸º
                if (Math.abs(moveX) > Math.abs(moveY)) {
                    e.preventDefault();
                }
                
                console.log('Touch move:', moveX, moveY);
            }, { passive: false });
            
            pagesContainer.addEventListener('touchend', function(e) {
                const touchObj = e.changedTouches[0];
                distX = touchObj.pageX - startX;
                distY = touchObj.pageY - startY;
                const elapsedTime = new Date().getTime() - startTime;
                
                console.log('Touch end:', distX, distY, elapsedTime);
                
                if (elapsedTime <= allowedTime) {
                    if (Math.abs(distX) >= threshold && Math.abs(distY) <= restraint) {
                        if (distX > 0) {
                            // å‘å³æ»‘åŠ¨ï¼Œåˆ‡æ¢åˆ°ä¸Šä¸€é¡µ
                            if (currentPage > 0) {
                                currentPage--;
                                updatePagePosition();
                            }
                        } else {
                            // å‘å·¦æ»‘åŠ¨ï¼Œåˆ‡æ¢åˆ°ä¸‹ä¸€é¡µ
                            if (currentPage < 1) {
                                currentPage++;
                                updatePagePosition();
                            }
                        }
                    }
                }
            }, { passive: true });
        }
        
        // æ›´æ–°é¡µé¢ä½ç½®
        function updatePagePosition() {
            const pagesContainer = document.getElementById('pages-container');
            pagesContainer.style.transform = `translateX(-${currentPage * 50}%)`;
            
            // è°ƒè¯•ä¿¡æ¯
            console.log('Current page:', currentPage);
            
            // ç¡®ä¿å˜æ¢æ­£ç¡®åº”ç”¨
            pagesContainer.style.willChange = 'transform';
        }
        
        // é‡æ–°ç»‘å®šåç‰‡ç»„ä»¶äº‹ä»¶ï¼ˆåœ¨DOMæ›´æ–°åè°ƒç”¨ï¼‰
        function bindProfileCardEvents() {
            // ç»‘å®šå¤´åƒä¸Šä¼ äº‹ä»¶
            const profileCard = document.querySelector('.profile-card');
            if (profileCard) {
                // ä¸ºå¤´åƒæ·»åŠ ç‚¹å‡»äº‹ä»¶
                const avatarElement = profileCard.querySelector('.profile-avatar');
                if (avatarElement) {
                    avatarElement.addEventListener('click', function(e) {
                        e.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡
                        document.getElementById('upload-input').click();
                    });
                }
                
                // ä¸ºåç‰‡å¡ç‰‡æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼ˆç¼–è¾‘æ˜µç§°å’Œç­¾åï¼‰
                profileCard.addEventListener('click', function(e) {
                    // å¦‚æœç‚¹å‡»çš„ä¸æ˜¯å¤´åƒï¼Œåˆ™æ˜¾ç¤ºç¼–è¾‘å¼¹çª—
                    if (!e.target.classList.contains('profile-avatar')) {
                        showProfileModal();
                    }
                });
            }
        }

        // ç»‘å®šéŸ³ä¹æ’­æ”¾å™¨äº‹ä»¶
        function bindMusicPlayerEvents() {
            // ç»‘å®šä¸“è¾‘å°é¢ç‚¹å‡»äº‹ä»¶
            const albumCover = document.getElementById('albumCover');
            if (albumCover) {
                albumCover.addEventListener('click', function() {
                    changeAlbumCover();
                });
            }
            
            // ç»‘å®šæ­Œæ›²åç‚¹å‡»äº‹ä»¶
            const songName = document.getElementById('songName');
            if (songName) {
                songName.addEventListener('click', function() {
                    openSongModal();
                });
            }
        }
        
        // åˆå§‹åŒ–éŸ³ä¹æ’­æ”¾å™¨
        function initMusicPlayer() {
            // ä»æœ¬åœ°å­˜å‚¨åŠ è½½éŸ³ä¹æ•°æ®
            const savedSong = localStorage.getItem('currentSong');
            if (savedSong) {
                try {
                    const song = JSON.parse(savedSong);
                    document.getElementById('songName').textContent = song.name;
                    document.getElementById('artistName').textContent = song.artist;
                } catch (e) {
                    console.error('è§£ææ­Œæ›²æ•°æ®æ—¶å‡ºé”™:', e);
                }
            }
            
            // åŠ è½½ä¸“è¾‘å°é¢
            const savedCover = localStorage.getItem('albumCover');
            if (savedCover) {
                document.getElementById('albumCover').innerHTML = `<img src="${savedCover}" alt="ä¸“è¾‘å°é¢" style="width:100%;height:100%;object-fit:cover;object-position:center;">`;
            }
            
            // æ£€æŸ¥æ˜¯å¦æœ‰ä¿å­˜çš„æ­Œæ›²æ–‡ä»¶
            const savedSongFile = localStorage.getItem('currentSongFile');
            if (savedSongFile) {
                try {
                    const songFile = JSON.parse(savedSongFile);
                    // å¯ç”¨ä¿å­˜æŒ‰é’®
                    const saveSongBtn = document.getElementById('saveSongBtn');
                    if (saveSongBtn) {
                        saveSongBtn.disabled = false;
                    }
                } catch (e) {
                    console.error('è§£ææ­Œæ›²æ–‡ä»¶æ•°æ®æ—¶å‡ºé”™:', e);
                }
            }
        }
        
        // ç‚¹å‡»æ­Œæ›²åæ‰“å¼€å¼¹çª—
        function openSongModal() {
            document.getElementById('songModal').classList.add('active');
            // åŠ è½½å·²ä¿å­˜çš„æ­Œæ›²ä¿¡æ¯
            const savedSong = localStorage.getItem('currentSong');
            if (savedSong) {
                const song = JSON.parse(savedSong);
                document.getElementById('songNameInput').value = song.name;
                document.getElementById('artistNameInput').value = song.artist;
                document.getElementById('saveSongBtn').disabled = false;
            }
            
            // æ£€æŸ¥æ˜¯å¦æœ‰ä¿å­˜çš„æ­Œæ›²æ–‡ä»¶
            const savedSongFile = localStorage.getItem('currentSongFile');
            if (savedSongFile) {
                const songFile = JSON.parse(savedSongFile);
                // å¦‚æœæœ‰ä¿å­˜çš„æ–‡ä»¶ï¼Œå¯ç”¨ä¿å­˜æŒ‰é’®
                document.getElementById('saveSongBtn').disabled = false;
            }
        }
        
        // å…³é—­å¼¹çª—
        function closeSongModal() {
            document.getElementById('songModal').classList.remove('active');
        }
        
        // å¤„ç†MP3ä¸Šä¼ 
        function handleMp3Upload(event) {
            const file = event.target.files[0];
            if (file) {
                // æ£€æŸ¥æ–‡ä»¶å¤§å°ï¼ˆé™åˆ¶ä¸º10MBï¼‰
                if (file.size > 10 * 1024 * 1024) {
                    alert('æ–‡ä»¶å¤ªå¤§ï¼Œè¯·é€‰æ‹©å°äº10MBçš„æ–‡ä»¶');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    // ä¿å­˜MP3æ–‡ä»¶æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨
                    localStorage.setItem('currentSongFile', JSON.stringify({
                        name: file.name,
                        size: file.size,
                        type: file.type,
                        data: e.target.result,
                        lastModified: file.lastModified
                    }));
                    
                    // å¯ç”¨ä¿å­˜æŒ‰é’®
                    document.getElementById('saveSongBtn').disabled = false;
                };
                reader.onerror = function(e) {
                    console.error('æ–‡ä»¶è¯»å–é”™è¯¯:', e);
                    alert('æ–‡ä»¶è¯»å–å¤±è´¥ï¼Œè¯·é‡è¯•');
                };
                reader.readAsDataURL(file);
            }
        }
        
        // ä¿å­˜æ­Œæ›²ä¿¡æ¯
        function saveSongInfo() {
            const songName = document.getElementById('songNameInput').value || 'æœªçŸ¥æ­Œæ›²';
            const artistName = document.getElementById('artistNameInput').value || 'æœªçŸ¥è‰ºæœ¯å®¶';
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            const songData = {
                name: songName,
                artist: artistName
            };
            localStorage.setItem('currentSong', JSON.stringify(songData));
            
            // æ›´æ–°é¡µé¢æ˜¾ç¤º
            document.getElementById('songName').textContent = songName;
            document.getElementById('artistName').textContent = artistName;
            
            // å…³é—­å¼¹çª—
            closeSongModal();
            
            // æ˜¾ç¤ºä¿å­˜æˆåŠŸæç¤º
            // è¿™é‡Œå¯ä»¥æ·»åŠ ä¸€ä¸ªç®€å•çš„æç¤ºï¼Œæ¯”å¦‚ä¸´æ—¶æ”¹å˜æŒ‰é’®æ–‡å­—
            const saveBtn = document.getElementById('saveSongBtn');
            const originalText = saveBtn.textContent;
            saveBtn.textContent = 'å·²ä¿å­˜';
            setTimeout(() => {
                saveBtn.textContent = originalText;
                saveBtn.disabled = false;
            }, 1000);
        }
        
        // æ›´æ¢ä¸“è¾‘å°é¢
        function changeAlbumCover() {
            // åˆ›å»ºæ–‡ä»¶è¾“å…¥å…ƒç´ 
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.onchange = function(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        // æ›´æ–°å°é¢æ˜¾ç¤ºï¼Œç¡®ä¿æ­£ç¡®æ¯”ä¾‹
                        document.getElementById('albumCover').innerHTML = `<img src="${e.target.result}" alt="ä¸“è¾‘å°é¢" style="width:100%;height:100%;object-fit:cover;object-position:center;">`;
                        // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
                        localStorage.setItem('albumCover', e.target.result);
                    };
                    reader.readAsDataURL(file);
                }
            };
            input.click();
        }
        
        // åˆ‡æ¢æ’­æ”¾/æš‚åœ
        function togglePlay() {
            const albumCover = document.getElementById('albumCover');
            const playIcon = document.getElementById('playIcon');
            const pauseIcon = document.getElementById('pauseIcon');
            const audioPlayer = document.getElementById('audioPlayer');
            
            if (albumCover.classList.contains('playing')) {
                // æš‚åœ
                albumCover.classList.remove('playing');
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
                audioPlayer.pause();
            } else {
                // æ’­æ”¾
                albumCover.classList.add('playing');
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'block';
                
                // æ£€æŸ¥æ˜¯å¦æœ‰ä¿å­˜çš„æ­Œæ›²æ–‡ä»¶
                const savedSongFile = localStorage.getItem('currentSongFile');
                if (savedSongFile) {
                    const songFile = JSON.parse(savedSongFile);
                    audioPlayer.src = songFile.data;
                    audioPlayer.play().catch(e => {
                        console.error('æ’­æ”¾å¤±è´¥:', e);
                        // å¦‚æœæ’­æ”¾å¤±è´¥ï¼Œå›æ»šUIçŠ¶æ€
                        albumCover.classList.remove('playing');
                        playIcon.style.display = 'block';
                        pauseIcon.style.display = 'none';
                        alert('æ’­æ”¾å¤±è´¥ï¼Œè¯·é‡è¯•');
                    });
                } else {
                    // æ²¡æœ‰ä¸Šä¼ æ–‡ä»¶æ—¶çš„æç¤º
                    albumCover.classList.remove('playing');
                    playIcon.style.display = 'block';
                    pauseIcon.style.display = 'none';
                    alert('è¯·å…ˆä¸Šä¼ MP3æ–‡ä»¶');
                }
            }
        }
        
        // ä¸Šä¸€é¦–
        function previousSong() {
            // è¿™é‡Œå¯ä»¥æ·»åŠ åˆ‡æ¢æ­Œæ›²çš„é€»è¾‘
            showModal('éŸ³ä¹æ’­æ”¾å™¨', 'ä¸Šä¸€é¦–åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­...');
        }
        
        // ä¸‹ä¸€é¦–
        function nextSong() {
            // è¿™é‡Œå¯ä»¥æ·»åŠ åˆ‡æ¢æ­Œæ›²çš„é€»è¾‘
            showModal('éŸ³ä¹æ’­æ”¾å™¨', 'ä¸‹ä¸€é¦–åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­...');
        }
        
        // é¡µé¢æ˜¾ç¤ºæ—¶ä¹ŸåŠ è½½å£çº¸ï¼ˆå¤„ç†ä»å…¶ä»–é¡µé¢è¿”å›çš„æƒ…å†µï¼‰
        window.addEventListener('pageshow', function() {
            console.log('Page show event'); // è°ƒè¯•ä¿¡æ¯
            loadSavedWallpaper();
        });
        
        // ç›‘å¬å­˜å‚¨å˜åŒ–äº‹ä»¶ï¼ˆæ­£ç¡®çš„æ–¹å¼ï¼‰
        window.addEventListener('storage', function(e) {
            console.log('Storage event:', e); // è°ƒè¯•ä¿¡æ¯
            if (e.key === 'wallpaper' || e.key === 'homeWallpaper') {
                loadSavedWallpaper();
            }
        });
        
        // ç›‘å¬è‡ªå®šä¹‰å£çº¸å˜åŒ–äº‹ä»¶
        window.addEventListener('wallpaperChanged', function(e) {
            console.log('Custom wallpaper changed event:', e); // è°ƒè¯•ä¿¡æ¯
            loadSavedWallpaper();
        });
        
        // åŠ è½½ä¿å­˜çš„å£çº¸
        function loadSavedWallpaper() {
            try {
                console.log('Attempting to load wallpaper'); // è°ƒè¯•ä¿¡æ¯
                
                // æ£€æŸ¥æŒä¹…åŒ–çš„å£çº¸è®¾ç½® (ä¼˜å…ˆæ£€æŸ¥ homeWallpaper)
                let persistentWallpaper = localStorage.getItem('homeWallpaper');
                if (!persistentWallpaper) {
                    persistentWallpaper = localStorage.getItem('wallpaper');
                }
                
                console.log('Wallpaper data from localStorage:', persistentWallpaper); // è°ƒè¯•ä¿¡æ¯
                
                if (persistentWallpaper) {
                    const wallpaperElement = document.querySelector('.wallpaper');
                    const videoWallpaperElement = document.querySelector('.video-wallpaper');
                    const videoElement = videoWallpaperElement.querySelector('video');
                    
                    if (wallpaperElement && videoWallpaperElement && videoElement) {
                        try {
                            // å°è¯•è§£æJSONæ ¼å¼
                            const wallpaperData = JSON.parse(persistentWallpaper);
                            console.log('Parsed wallpaper data:', wallpaperData); // è°ƒè¯•ä¿¡æ¯
                            
                            if (wallpaperData.type === 'video') {
                                // å¯¹äºè§†é¢‘å£çº¸ï¼Œæ˜¾ç¤ºè§†é¢‘
                                videoElement.src = wallpaperData.src;
                                videoWallpaperElement.style.display = 'block';
                                wallpaperElement.style.display = 'none';
                                console.log('Set video wallpaper'); // è°ƒè¯•ä¿¡æ¯
                            } else if (wallpaperData.src) {
                                // ç¡®ä¿URLæ ¼å¼æ­£ç¡®
                                let imageUrl = wallpaperData.src;
                                
                                wallpaperElement.style.backgroundImage = `url("${imageUrl}")`;
                                videoWallpaperElement.style.display = 'none';
                                wallpaperElement.style.display = 'block';
                                console.log('Set image wallpaper from URL:', imageUrl); // è°ƒè¯•ä¿¡æ¯
                            } else {
                                // å…¼å®¹æ—§æ ¼å¼
                                wallpaperElement.style.backgroundImage = `url("${persistentWallpaper}")`;
                                videoWallpaperElement.style.display = 'none';
                                wallpaperElement.style.display = 'block';
                                console.log('Set wallpaper directly from data'); // è°ƒè¯•ä¿¡æ¯
                            }
                        } catch (e) {
                            // å…¼å®¹æ—§æ ¼å¼ (ç›´æ¥å­˜å‚¨URLå­—ç¬¦ä¸²)
                            console.log('Using old format, setting wallpaper directly:', persistentWallpaper); // è°ƒè¯•ä¿¡æ¯
                            // ç¡®ä¿URLæ ¼å¼æ­£ç¡®
                            let imageUrl = persistentWallpaper;
                            
                            wallpaperElement.style.backgroundImage = `url("${imageUrl}")`;
                            videoWallpaperElement.style.display = 'none';
                            wallpaperElement.style.display = 'block';
                        }
                    } else {
                        console.log('Wallpaper element not found'); // è°ƒè¯•ä¿¡æ¯
                    }
                } else {
                    console.log('No wallpaper data found in localStorage'); // è°ƒè¯•ä¿¡æ¯
                }
            } catch (e) {
                if (e.name === 'QuotaExceededError') {
                    console.error('å­˜å‚¨ç©ºé—´ä¸è¶³:', e);
                } else {
                    console.error('æ— æ³•åŠ è½½ä¿å­˜çš„å£çº¸:', e);
                }
            }
        }
        
        // ç‰¹åˆ«å¤„ç†è§†é¢‘å£çº¸
        function handleVideoWallpaper(wallpaperData) {
            // å¯¹äºè§†é¢‘å£çº¸ï¼Œæˆ‘ä»¬åªå¤„ç†URLï¼Œä¸åŠ è½½å®é™…è§†é¢‘å†…å®¹
            const wallpaperElement = document.querySelector('.wallpaper');
            if (wallpaperElement) {
                // æ˜¾ç¤ºè§†é¢‘ç¼©ç•¥å›¾è€Œä¸æ˜¯å®é™…è§†é¢‘
                wallpaperElement.style.backgroundImage = 'url(https://picsum.photos/seed/video/400/800)';
                console.log('Set video wallpaper with thumbnail'); // è°ƒè¯•ä¿¡æ¯
            }
        }
    </script>
</body>
</html>
